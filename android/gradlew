#!/bin/sh
#
# Copyright Â© 2015-2021 Gradle Inc.
#
# This file is part of Gradle.
# It is subject to the license terms in the LICENSE file found in the top-level directory of this distribution.
#

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=""

APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

warn () {
    echo "$*"
}

die () {
    echo
    echo "$*"
    echo
    exit 1
}

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
case "`uname`" in
  CYGWIN*)
    cygwin=true
    ;;
  Darwin*)
    darwin=true
    ;;
  MINGW*)
    msys=true
    ;;
esac

# Attempt to set APP_HOME
# Resolve links: $0 may be a link
PRG="$0"
# Need this for relative symlinks.
while [ -h "$PRG" ] ; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`"/$link"
  fi
done
APP_HOME=`dirname "$PRG"`

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=""

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

# For Darwin, add options to specify how the application appears in the dock
if $darwin; then
    GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
fi

# For Cygwin, switch paths to Windows format before running java
if $cygwin; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`
    JAVA_HOME=`cygpath --path --mixed "$JAVA_HOME"`
fi

# For MSYS, switch paths to Windows format before running java
if $msys; then
    APP_HOME=`(cd "$APP_HOME"; pwd -W)`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`
    JAVA_HOME=`cygpath --path --mixed "$JAVA_HOME"`
fi

# Based on: http://stackoverflow.com/questions/59895/can-a-bash-script-tell-what-directory-its-stored-in
APP_HOME=`cd "${APP_HOME}" ; pwd -P` || exit

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=""

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

# For Cygwin, ensure paths are in UNIX format before anything is touched
if $cygwin; then
    [ -n "$JAVA_HOME" ] && JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
fi

# For MSYS, ensure paths are in UNIX format before anything is touched
if $msys; then
    [ -n "$JAVA_HOME" ] && JAVA_HOME=`(cd "$JAVA_HOME"; pwd -W)`
fi

# Attempt to set JAVA_HOME if it's not already set
if [ -z "$JAVA_HOME" ]; then
    # If on Windows, try to find JAVA_HOME based on 'java.exe' in PATH
    if $cygwin || $msys; then
        JAVA_HOME=`cygpath --absolute --path "$(dirname "$(command -v java)")/.."`
    else
        JAVA_HOME="$HOME/.sdkman/candidates/java/current"
        if [ ! -d "$JAVA_HOME" ]; then
            JAVA_HOME="/usr/lib/jvm/java"
        fi
    fi
fi

# Split up the JVM_OPTS and other options to work around Windows quoting issues
if [ -n "$GRADLE_OPTS" ]; then
    GRADLE_OPTS="$DEFAULT_JVM_OPTS $GRADLE_OPTS"
else
    GRADLE_OPTS="$DEFAULT_JVM_OPTS"
fi

# For Cygwin or MSYS, switch paths to Windows format before running java
if $cygwin || $msys; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`
    JAVA_HOME=`cygpath --path --mixed "$JAVA_HOME"`
fi

# Execute Gradle
if [ "$cygwin" = "true" -o "$msys" = "true" ]; then
    JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"
fi

exec "$JAVA_HOME/bin/java" $JAVA_OPTS -classpath "$CLASSPATH" org.gradle.wrapper.GradleWrapperMain "$@"
